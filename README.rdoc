CI::Reporter is an add-on to Test::Unit, RSpec and Cucumber that allows you to generate XML reports of your test, spec and/or feature runs. The resulting files can be read by a continuous integration system that understands Ant's JUnit report XML format, thus allowing your CI system to track test/spec successes and failures.

== Installation

CI::Reporter is available as a gem. To install the gem, use the usual gem command:

    gem install ci_reporter

== Usage

CI::Reporter works with projects that use standard Rake tasks for
running tests. In this fashion, it hooks into testing frameworks using
environment variables recognized by these custom tasks to inject the
CI::Reporter code into the test run.

1. To use CI::Reporter, simply add one of the following lines to your Rakefile:

    require 'ci/reporter/rake/cucumber'  # use this if you're using Cucumber
    require 'ci/reporter/rake/spinach'   # use this if you're using Spinach
    require 'ci/reporter/rake/test_unit' # use this if you're using Test::Unit
    require 'ci/reporter/rake/minitest'  # use this if you're using Ruby 1.9 or minitest

Note: If you use both cucumber and spinach, you are likely to see strange errors, due to
`gherkin` and `gherkin-ruby` both being loaded. So, you should choose only one of
cucumber and spinach.

2. Next, either modify your Rakefile to make the <code>ci:setup:cucumber</code>, <code>ci:setup:testunit</code> or <code>ci:setup:minitest</code> task a dependency of your test tasks, or run one of these rake tasks:

    rake ci:setup:testunit test
    rake ci:setup:minitest test
    rake ci:setup:cucumber features
    rake ci:setup:spinach features

== Jenkins setup

1. Tick the box labelled "Publish JUnit test result report" in the job configuration

2. Enter "test/reports/*.xml,spec/reports/*.xml" in the "Test report XMLs" field (adjust this to suit which tests you are running)

Report files are written, by default, to the <code>test/reports</code>, <code>features/reports</code> or <code>spec/reports</code> subdirectory of your project.  If you wish to customize the location, simply set the environment variable CI_REPORTS (either in the environment, on the Rake command line, or in your Rakefile) to the location where they should go.

== Environment Variables

* +CI_REPORTS+: if set, points to a directory where report files will be written.
* +CI_CAPTURE+: if set to value "off", stdout/stderr capture will be disabled.

== Travis Build Status {<img src="https://secure.travis-ci.org/nicksieger/ci_reporter.png"/>}[http://travis-ci.org/#!/nicksieger/ci_reporter]

== Source

You can get the CI::Reporter source using Git, in any of the following ways:

    git clone git://git.caldersphere.net/ci_reporter.git
    git clone git://github.com/nicksieger/ci_reporter.git

You can also download a tarball of the latest CI::Reporter source at http://github.com/nicksieger/ci_reporter/.

== License

This software is released under an MIT license.  For details, see the LICENSE.txt file included with the distribution.
